# CDL Master TODO
## Everything We Need To Do

> *"A dream without a plan is just a wish."*

---

## üî¥ CRITICAL ‚Äî Before Tournament I (Jan 31)

### Registration & Teams
- [x] Get first team registered (proof of concept) ‚úÖ
- [ ] Reach 5 teams (halfway)
- [ ] Reach 10 teams (full tournament)
- [ ] Create waitlist system if we exceed capacity
- [ ] Confirm all registered teams 48 hours before

### Venue & Logistics
- [ ] Confirm Stefan's Lounge booking
- [ ] Site visit ‚Äî measure space, plan layout
- [ ] Determine table setup (how many games simultaneously?)
- [ ] Plan bracket/tournament flow
- [ ] Equipment list (tables, dominoes, scoreboards)
- [ ] Source quality domino sets
- [ ] Backup dominoes
- [ ] Printed brackets
- [ ] Signage for venue

### Marketing & Outreach
- [ ] Create Instagram account (@cubandominoleague)
- [ ] Create TikTok account
- [ ] First post ‚Äî announcement
- [ ] Outreach to North Jersey Cuban community (Union City, West New York)
- [ ] Outreach to NYC Cuban community
- [ ] Find 3-5 OG players to invite/feature
- [ ] Flyer design for local distribution
- [ ] Print flyers
- [ ] Distribute flyers at Cuban spots

### Content & Production
- [ ] Plan filming setup for Tournament I
- [ ] Camera equipment sourced
- [ ] Audio equipment (table mic for slams)
- [ ] Shot list for the event
- [ ] Identify 2-3 compelling player stories to follow
- [ ] B-roll shot list (cigars, cafecito, atmosphere)

### Brand & Design
- [ ] Finalize CDL logo ‚Äî **Logo design session completed! See `TEAM/SESSIONS/2026-01-14-logo-design-session.md`**
- [ ] Create social media templates
- [ ] Event poster/graphic
- [ ] Player name tags/cards
- [ ] Winner trophy/prize presentation
- [ ] Tobias cohesion pass: La Mesa tooltip + ‚Äúseats left‚Äù urgency
- [x] Merch concepts brainstormed ‚Äî **See `TEAM/SESSIONS/2026-01-14-merch-brainstorm.md`**
- [x] P0 La Mesa (Tobias + Walt): unify "Tonight" venue + call time across site (Hero / Registration / La Mesa) and fix day-of-week for Jan 31, 2026 (Saturday)
- [x] P0 La Mesa (Tobias): countdown display format (no `122:..` hours); prefer `XD YH ZM` readability + calm update rate
- [x] P0 La Mesa (Tobias): add subtle hub-to-chat cue (divider + "CHAT" label + pip) so chat is discoverable without feeling app-y
- [x] P0 La Mesa (Tobias): reduce "Invite" visual noise in Who's Here; row-tap = @mention, invite becomes secondary

---

## üü° IMPORTANT ‚Äî First 30 Days After Tournament I

### Content Creation
- [ ] Edit Tournament I highlight reel (60-90 seconds)
- [ ] Create 5-10 short clips for social
- [ ] Full match edit of finals
- [ ] Player profile videos
- [ ] "Best slams" compilation
- [ ] "Best trash talk" compilation
- [ ] Behind-the-scenes content
- [ ] Winner interview

### Growth & Community
- [ ] Post-tournament email to all participants
- [ ] Gather testimonials
- [ ] Photo gallery on website
- [ ] Announce Tournament II date
- [ ] Start Tournament II registration
- [ ] Build email list
- [x] Community chat ‚Äî **"La Mesa" built into website!**

### Brand Development
- [x] Brand guidelines document (colors, fonts, usage) ‚Äî **DESIGN-SYSTEM.md created!**
- [x] "The Bone Language" design system implemented
- [ ] Tagline finalized ("Your seat's waiting" or alternative)
- [ ] Tone of voice guide
- [ ] Photography style guide
- [ ] Video style guide

### Partnerships
- [ ] Identify potential sponsors (local first)
- [ ] Cigar brands outreach
- [ ] Cuban coffee brands outreach
- [ ] Local Cuban restaurants/businesses
- [ ] Media outreach (local Cuban press)

---

## üü¢ FUTURE ‚Äî Building The League

### Expansion
- [ ] Tournament II planning
- [ ] Miami market research
- [ ] North Jersey venue scouting
- [ ] Regular league night format?
- [ ] Rankings/standings system
- [ ] Player profiles database

### Broadcast & Media
- [ ] YouTube channel setup
- [ ] Streaming capability research
- [ ] Commentary team identification
- [ ] Broadcast graphics package
- [ ] Theme music/audio branding

### Business & Operations
- [ ] Legal entity formation
- [ ] Bank account
- [ ] Sponsorship deck
- [ ] Pricing structure for future events
- [ ] Merchandise exploration
- [ ] Website upgrades (player profiles, brackets, etc.)

### Technology
- [ ] Live scoring system?
- [ ] Bracket management tool
- [ ] Player registration database
- [x] Mobile-friendly improvements ‚Äî **90% mobile users, optimized chat/ticker/safe areas, iOS zoom fix**
- [x] La Mesa ticker: disable touch-to-pause (ticker always scrolls)
- [x] Panel 4 (‚ÄúTAKE YOUR SEAT‚Äù): subtle animation refinement + reduced-motion fallback
- [x] `/concepts` page for visual QA (tooltips + seats-left)
- [x] La Mesa tooltip: broadcast default + preview variants
- [x] ‚ÄúSeats left‚Äù counter: broadcast plaque + single tickdown momentum + stormbeat on live registration
- [ ] Tune stormbeat intensity (urgent, not distracting)
- [x] BUG-009: La Mesa hub visibility after Claim Seat ‚Äî fixed scroll-container jump + documented in `DOCS/BUGS/009-la-mesa-hub-visibility-scroll-container.md`
- [x] La Mesa pre-merge regression checklist added to `DOCS/PLANS/la-mesa-plan.md` (prevents hub hiding regressions)
- [x] BUG-011: Loader stuck on page load (inline script SyntaxError) ‚Äî fixed and documented in `DOCS/BUGS/011-loading-screen-stuck-inline-script-syntax-error.md`
- [ ] La Mesa auth rollout: set Cloudflare env vars `SUPABASE_URL` + `SUPABASE_SERVICE_ROLE_KEY` (server-side)
- [ ] La Mesa auth rollout: allow redirect URL `/mesa/callback` in Supabase Auth settings
- [ ] La Mesa auth rollout: apply migration `supabase/migrations/20260126_mesa_player_auth.sql`
- [ ] La Mesa auth UX: confirmation email includes one-click ‚ÄúEnter La Mesa‚Äù door key (ADR-003)

---

## By Department

### Dana White (CEO)
- [ ] Secure venue confirmation
- [ ] Set budget for Tournament I
- [ ] Identify potential sponsors to approach
- [ ] Overall timeline accountability

### Jay-Z (Chief Brand Officer)
- [ ] Approve final brand positioning
- [ ] Review all public-facing materials
- [ ] Cultural authenticity check
- [ ] "Cool factor" gut check on everything

### Capablanca (Commissioner)
- [ ] Official ruleset document
- [ ] Tournament format finalized
- [ ] Dispute resolution process
- [ ] Fair play guidelines

### Benny Binion (Tournament Ops)
- [ ] Event day run-of-show
- [ ] Registration/check-in process
- [ ] Bracket management
- [ ] Prize distribution plan
- [ ] Venue layout diagram

### Herb Lubalin (Brand Identity)
- [x] Logo concepts ‚Äî **5 directions designed! See `TEAM/SESSIONS/2026-01-14-logo-design-session.md`**
- [x] Typography system ‚Äî **Bodoni Moda + IBM Plex Sans**
- [x] Color specifications ‚Äî **Brass, tobacco, cream, copper, burgundy defined**
- [ ] Logo usage guidelines ‚Äî *Pending final logo selection*

### George Lois (Advertising)
- [ ] Tagline options
- [ ] Flyer/poster concept
- [ ] Social ad concepts
- [ ] Messaging hierarchy

### Wes Anderson (Visual Style)
- [ ] Color palette hex codes
- [ ] Photography direction
- [ ] Video composition rules
- [ ] Event aesthetic direction

### Wifredo Lam (Artistic Director)
- [ ] Cultural authenticity review
- [ ] Symbolic elements guidance
- [ ] Spiritual/ceremonial aspects
- [ ] Cuban heritage verification

### Daisy Exp√≥sito-Ulla (Marketing)
- [ ] Social media strategy
- [ ] Community outreach plan
- [ ] Content calendar
- [ ] Influencer/OG identification
- [ ] North Jersey community connections

### Steve Lipscomb (Broadcast & Production)
- [ ] Equipment list
- [ ] Filming plan
- [ ] Shot list
- [ ] Audio setup
- [ ] Post-production workflow

---

## Completed ‚úÖ

- [x] Assemble dream team (10 legends)
- [x] **cubandominoleague.com LIVE**
- [x] Registration system working
- [x] Venue identified (Stefan's Lounge, 333 Bergenline Blvd, Fairview)
- [x] Date set (January 31, 2026)
- [x] Visual assets created (4 panels)
- [x] Team documentation complete
- [x] Domain secured and pointing
- [x] Git-connected Cloudflare Pages deployment configured
- [x] Environment variables set in Cloudflare (APP_SCRIPT_URL, APP_SCRIPT_SECRET, VENUE_URL)
- [x] Custom domain migrated to new Git-connected project
- [x] Old direct-upload project deleted
- [x] **First team registered!** (proof of concept verified)
- [x] Email confirmation system working (Resend API only - no Gmail fallback)
- [x] Host notification emails working
- [x] Gmail fallback removed (unprofessional - sends from personal email)
- [x] Bug documentation folder created (`DOCS/BUGS/`)
- [x] Registration bug fixed (email errors no longer crash registration)
- [x] Troubleshooting documentation created (TROUBLESHOOTING.md)
- [x] Email routing configured (Erik@cubandominoleague.com ‚Üí efelipe1992@gmail.com)
- [x] Contact email added to confirmation emails
- [x] **"Who's In So Far"** ‚Äî Live display of registered teams on form panel
- [x] **"La Mesa" Live Chat** ‚Äî Real-time chat using Supabase for pre-tournament hype
- [x] Website copy finalized (panels 2-4 reviewed by Dream Team)
- [x] Player personas created (6 personas: Landy, Maria Elena, Danny, Carmen, Alex, Gaby)
- [x] Cuban pixel avatars (7 options: domino, cigar, cafecito, carro, palma, bandera, conga)
- [x] Chat reactions (üî•üòÇüëèüí™üå¥)
- [x] Pinned messages feature
- [x] Panel 5 Spanish tagline: "La mesa te espera"
- [x] **"CDL I" tournament edition marker** ‚Äî UFC-style event branding
- [x] **La Mesa post-registration flow** ‚Äî Chat unlocks after sign-up (reward system)
- [x] **Identity screen UX redesign** ‚Äî Custom dropdown, live player count, flag selector
- [x] **Flag selector polish** ‚Äî Glow no longer clips; edge fades + center cue + magnetic settle snap
- [x] **Mobile flag tap fix** ‚Äî Removed double-flicker (no transform fighting / no delayed selected state)
- [x] **"The Bone Language" design system** ‚Äî Unified 12px border-radius, domino tile shape language
- [x] **La Mesa domino tile button** ‚Äî Vertical domino with pip pattern replaces generic pill
- [x] **Hired Tobias van Schneider** ‚Äî Chief Product Designer (Spotify dark UI, micro-interactions)
- [x] Tobias + Walt: continuous oversight defined for La Mesa execution (`TEAM/chief-product-designer-tobias-van-schneider.md`, `TEAM/chief-experience-architect-walt-disney.md`)
- [x] **Design Team Site Review** ‚Äî Full audit with Wifredo, George, Wes, Herb
- [x] **Domino button 50% larger** ‚Äî Now 84√ó135px with heartbeat pulse animation
- [x] **Free Agent single pip** ‚Äî Brass pip icon replaces text badge (Bone Language)
- [x] **Chat warm fog gradient** ‚Äî Darker at top, lighter where you type
- [x] **Send button slam animation** ‚Äî Scale + burst + ripple on send
- [x] **Film grain on backgrounds** ‚Äî 2-3% noise overlay for memory texture
- [x] **Registration form centered** ‚Äî Flexbox alignment per Wes Anderson
- [x] **LA MESA brass underline** ‚Äî Sign above a door feel per Herb Lubalin
- [x] **La Mesa ESPN-style ticker** ‚Äî Live activity feed showing registrations/joins
- [x] **Expandable chat panel** ‚Äî Backdrop dimming, focus hierarchy
- [x] **Mobile scroll lock bug fixed** ‚Äî Send button disappearing, page zoom issue
- [x] **Ticker visibility on mobile** ‚Äî Ticker shows below chat input when open
- [x] **Chat simplified** ‚Äî Removed reaction system for cleaner UX
- [x] **Touch-to-pause ticker** ‚Äî Mobile users can tap to pause and read
- [x] **iOS Safari zoom fix** ‚Äî viewport max-scale + 16px input font-size
- [x] **Logo design session** ‚Äî 5 directions with Nano Banana Pro prompts
- [x] **Merch brainstorm session** ‚Äî 21 products with AI prompts for mockups
- [x] **Rules grid 2-column on mobile** ‚Äî Preserved 2-column layout instead of stacking
- [x] **iOS chat header fixed** ‚Äî Added solid background for La Mesa header visibility
- [x] **Hero-anchor coordinates removed** ‚Äî Deleted "23.1136¬∞ N, 82.3666¬∞ W" element above ticker
- [x] **Ticker redesigned with Tobias principles** ‚Äî Simplified to essentials: live count, spots left, registrations, updates
- [x] **Ticker infinite scroll fix** ‚Äî `tickerInitialized` flag prevents animation resets, GPU-optimized with `will-change`
- [x] **Tournament updates in ticker** ‚Äî Copper color for alerts ("Registration closes Friday", "$500 prize pool")
- [x] **Chat events removed from ticker** ‚Äî Focus on key moments (registrations + updates only)
- [x] **La Mesa button registration gate** ‚Äî Unregistered users scroll to signup form on click
- [x] **Loading screen immersive enhancements** ‚Äî Film grain, vignette edges, staggered letter reveal
- [x] **Letters ARE the light source** ‚Äî 6-layer stacked text-shadow bloom, divider glow, subtle ambient fog
- [x] **Mobile form panel redesign** ‚Äî Single viewport experience, everything visible on first snap
- [x] **Footer scroll-snap fix** ‚Äî Added `scroll-padding-bottom` for ticker clearance
- [x] **Form headline mobile placement** ‚Äî "La mesa te espera" compact at top on mobile
- [x] **Scarcity indicator below button** ‚Äî Small "X seats remain" under Claim Your Seat on mobile
- [x] **Footer tagline removed** ‚Äî Cleaner footer without "La mesa te espera" tagline
- [x] **Hero typography redesign** ‚Äî UFC-style CDL I brass badge, removed redundant "Cuban Domino League presents"
- [x] **Championship tagline styling** ‚Äî Decorative brass lines framing "THE FIRST CUBAN DOMINO LEAGUE CHAMPIONSHIP"
- [x] **Ticker CSS :has() removal** ‚Äî Removed Safari-incompatible :has() selectors causing dimming issues
- [x] **Ticker explicit visibility rules** ‚Äî Added :not(.ticker-dimmed) CSS with !important to force full opacity
- [x] **Ticker debug logging** ‚Äî MutationObserver tracks class changes for Safari debugging
- [x] **Mobile form panel breathing room** ‚Äî Added `max(60px, 10vh)` top padding to prevent headline cutoff
- [x] **Panel 2 & 3 headline positioning** ‚Äî Lowered "Que Bola Asere" and Panel 3 headlines with `max(50px, 6vh)` padding
- [x] **Form footer ticker clearance** ‚Äî Added 80px bottom padding to prevent ticker overlap
- [x] **La Mesa registration gate hardening** ‚Äî Defensive checks in both `openChat()` and `toggleChat()` to prevent rapid-click bypass
- [x] **Hero "La Salida" luminous glow** ‚Äî 7-layer text-shadow for glowing effect on mobile
- [x] **Hero tagline/subtitle readability** ‚Äî Increased minimum sizes and opacity for mobile legibility
- [x] **Loading screen hypnotic redesign** ‚Äî Synchronized 3.5s heartbeat pulse, ember particles, orbital float, enhanced letter reveal
- [x] **Loading screen timing extended** ‚Äî 400ms ‚Üí 1400ms for proper cinematic effect
- [x] **Form slogan styling** ‚Äî "La mesa te espera" in Bodoni Moda italic, confident (not precious) per Dana White's UFC edge
- [x] **La Ley rules panel sports typography** ‚Äî Rule card titles switched from Bodoni Moda to IBM Plex Sans 600, uppercase, 0.08em tracking
- [x] **La Ley plaque refinement** ‚Äî Engraved/inlaid border + reduced radius (less ‚ÄúUI card‚Äù, more artifact)
- [x] **Sitewide typography audit** ‚Äî Identified all broadcast vs elegant typography moments
- [x] **Sports broadcast tracking consistency** ‚Äî Standardized 0.08em tracking across rule cards, rules subtitle, mobile nav labels, ticker preview badge
- [x] **Loading screen: removed looping animations** ‚Äî Per Tobias, removed heartbeat/orbital animations that "drew the eye without purpose"
- [x] **Mobile postscript fix** ‚Äî Shorter edge fades, image now visible on mobile
- [x] **Admin redesign: cigar lounge cohesion** ‚Äî Unified design system across admin panels
- [x] **CDL Logo System: Wordmark with Signature Line** ‚Äî Final logo treatment with brass typography
- [x] **Panels 2-4: Complete narrative arc** ‚Äî Typography hierarchy refined for storytelling flow
- [x] **Back-to-top pip cinematic animations** ‚Äî Matching loading screen visual language (scale 0.9‚Üí1, elastic pop easing, glow bloom)
- [x] **Admin dashboard ticker preview fix** ‚Äî Used `100dvh` for iOS, corrected height offset to 200px, reduced hero padding
- [x] **Venue change: Stefan's Lounge** ‚Äî Updated from Mr Garcia Cigars to Stefan's Lounge (333 Bergenline Blvd, Fairview)
- [x] **Registration flow: La Mesa teaming** ‚Äî Players register solo, team up in La Mesa chat (replaced Commissioner pairing)
- [x] **Email time updated** ‚Äî Event time changed from 7PM to 6PM
- [x] **Success + Footer polish** ‚Äî Success layout fills screen evenly; form‚Üífooter dissolve; footer darkened for readability
- [x] **Terms copy tweak** ‚Äî "hablando mierda (talking trash)" phrasing
- [x] **Tobias Scroll Audit: Hint Timing** ‚Äî Standardized all scroll hints to 2.5s delay for consistent rhythm
- [x] **Tobias Scroll Audit: Lock Durations** ‚Äî Reduced panel locks (Whisper 8.5‚Üí6.5s, Build 13‚Üí8s, Slam 6‚Üí5s, Rules 3‚Üí2.5s) for "room" feel not "trapped"
- [x] **Tobias Scroll Audit: Micro-Jerk Mask** ‚Äî Extended opacity dip to 120ms + added 0.5px blur for smoother camera-cut transitions
- [x] **Tobias Scroll Audit: Panel Transitions** ‚Äî Enhanced opacity (0.85‚Üí1.0) + scale (0.985‚Üí1) + blur (0.3px‚Üí0) for real "camera cut" feel
- [x] **Tobias Scroll Audit: Form Panel** ‚Äî Added scroll indicator gradient + form interaction tracking to prevent snap re-engaging while filling form

---

## Deployment Guide: Cloudflare Pages + Git

### How It Works Now
Every `git push` to `main` automatically deploys to cubandominoleague.com.

### Build Configuration
| Setting | Value |
|---------|-------|
| Framework preset | Astro |
| Build command | `npm run build` |
| Build output directory | `dist` |
| Production branch | `main` |

### Environment Variables (Set in Cloudflare Dashboard)
```
APP_SCRIPT_URL=https://script.google.com/macros/s/XXXXX/exec
APP_SCRIPT_SECRET=your-shared-secret
VENUE_URL=https://maps.google.com/?q=333+Bergenline+Blvd,+Fairview,+NJ
```

### Deploy Workflow
```bash
# Make changes locally
git add .
git commit -m "Your changes"
git push origin main
# Cloudflare automatically builds and deploys
```

### Cloudflare Dashboard
- **Project**: cubandominotournament
- **Custom domain**: cubandominoleague.com
- **Settings ‚Üí Environment variables**: Add secrets here
- **Deployments**: View build logs and rollback if needed

### Migration History (January 2025)
Original project (`cuban-domino-league`) was created via `wrangler pages deploy` (direct upload).
Since Git cannot be added to direct-upload projects, we created a new Git-connected project
(`cubandominotournament`), migrated the custom domain, and deleted the old project.

**Status: Complete** ‚Äî All deploys now happen automatically via `git push`.

---

## Notes

*Add notes from team discussions here*

---

**Last Updated:** January 24, 2026 (Tobias Scroll Audit: All remaining fixes implemented)

*"La mesa te espera."*

---

## Recent Session Notes (Jan 17, 2026) ‚Äî Back-to-Top Pip Cinematic Animations

### The Goal
Refine the back-to-top pip's entrance/exit animations to match the loading screen's visual language (Tobias van Schneider's "micro-moments" philosophy).

### Loading Screen Animation Language Reference
| Element | Entry Pattern | Easing | Duration |
|---------|--------------|--------|----------|
| CDL Tile | `scale(0.9‚Üí1)` + fade | `cubic-bezier(0.16, 1, 0.3, 1)` | 1.2s |
| Letters | `translateY(15px‚Üí0)` + `scale(0.95‚Üí1)` + unblur | same | 1.2s |
| Divider | Slam with overshoot | `cubic-bezier(0.34, 1.56, 0.64, 1)` | 0.5s |
| Glow | `scale(0.6‚Üí1)` bloom | `ease-out` | 1.5s |

### Changes Made

**1. Refined Entrance Animation**
```css
.back-to-top {
  transform: translateY(-8px) scale(0.9);
  transition:
    opacity 0.6s ease-out,
    visibility 0.6s ease-out,
    transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
}
```

- `scale(0.9‚Üí1)` ‚Äî matches tile's entrance, not too dramatic
- `translateY(-8px‚Üí0)` ‚Äî subtle drop-in, like it's being placed
- `0.6s` duration ‚Äî matches loading screen fade timing
- `cubic-bezier(0.16, 1, 0.3, 1)` ‚Äî elastic pop easing from tile/letters

**2. Glow Bloom on Entrance**
```css
.back-to-top__pip {
  box-shadow: 0 0 8px rgba(..., 0.3), 0 0 16px rgba(..., 0.15); /* dim */
  transition: box-shadow 0.6s ease-out;
}
.back-to-top.is-visible .back-to-top__pip {
  box-shadow: 0 0 12px rgba(..., 0.5), 0 0 24px rgba(..., 0.25); /* full */
}
```

Like `glowCrescendo` ‚Äî pip starts dim and blooms to full glow on appearance.

**3. Graceful Exit**
Same easing in reverse creates symmetry ‚Äî it "lifts away" as gracefully as it arrives.

### Key Insight
The pip IS a mini CDL tile, so it should animate like one.

---

## Recent Session Notes (Jan 16, 2026) ‚Äî Sports Typography Consistency

### The Problem
The La Ley rules panel felt like a wine menu, not a competitive tournament. Too much serif typography (Bodoni Moda) created elegance but lacked the sports broadcast energy that the La Mesa ticker delivers.

### Typography Audit
Analyzed all pages to identify broadcast vs elegant moments:

**Already Correct (Sports Energy):**
- La Mesa ticker ‚Äî IBM Plex Sans Condensed, 700, uppercase
- Hero tagline "LA SALIDA" ‚Äî IBM Plex Sans, 600, uppercase, 0.18em
- Admin table headers ‚Äî 600, uppercase, 0.1em
- Admin form labels ‚Äî 600, uppercase, 0.1em

**Needed Updates:**
| Element | Before | After |
|---------|--------|-------|
| Rule card titles | Bodoni Moda 500 | IBM Plex Sans 600, uppercase, 0.08em |
| Rules subtitle | Weight 400, 0.25em | Weight 600, 0.08em |
| Mobile nav labels | 0.02em tracking | 0.08em tracking |
| Ticker preview badge | 0.05em tracking | 0.08em tracking |

**Kept Elegant (Brand Moments):**
- "La Ley" main title ‚Äî Bodoni Moda (brand moment)
- Panel headlines ‚Äî Bodoni Moda 900 (cinematic)
- "Respect the table." ‚Äî Serif tagline (statement)
- Admin card titles ‚Äî Workspace UI

### Design Principle
**Sports Broadcast Energy** (IBM Plex Sans, 600, uppercase, 0.08em): Live data, stats, rules, admin interfaces
**Elegant/Cinematic** (Bodoni Moda, 400-900, mixed case): Story moments, brand elements, emotional content

### Files Changed
- `src/pages/index.astro` ‚Äî Rule card titles, rules subtitle
- `src/components/admin/AdminLayout.astro` ‚Äî Mobile nav labels
- `src/pages/admin/announcements.astro` ‚Äî Preview badge

### Key Takeaway
The La Ley panel now matches the La Mesa ticker energy. Rules feel like stats on a scoreboard while the header stays elegant as a brand moment.

---

## Recent Session Notes (Jan 15, 2026) ‚Äî Mobile Polish + Hypnotic Loading + Form Slogan

### Mobile Form Panel Breathing Room
**Problem:** On iPhone, form headline "La mesa te espera" was cut off at the top.

**Solution:**
- Changed mobile padding from `5vh` to `max(60px, 10vh)` ‚Äî guaranteed minimum
- Added `overflow-y: auto` to allow scrolling on small screens
- Same fix applied to Panel 2 & 3 headlines with `max(50px, 6vh)`

### La Mesa Registration Gate Hardening
**Problem:** Rapid clicks on domino button could open La Mesa even when unregistered.

**Solution:** Added defensive `localStorage.getItem('cdl_registered')` checks to BOTH `openChat()` and `toggleChat()` functions. Belt-and-suspenders approach.

### Hero Text Hierarchy (Mobile Readability)
**Problem:** "La Salida" was hard to read on mobile, tagline/subtitle too dim.

**Solution:**
- Added 7-layer luminous glow text-shadow to "La Salida"
- Increased tagline minimum from 0.5rem to 0.65rem
- Increased subtitle opacity from 0.55 to 0.78
- Mobile-specific overrides with stronger glow

### Loading Screen Hypnotic Redesign
**Tobias Principle:** "Make them forget they're waiting."

**Implemented:**
- Synchronized 3.5s heartbeat pulse across all elements
- Ember particles floating upward (cigar smoke feel)
- Gentle orbital float with micro-rotation
- Divider "slam" effect (scale + shadow spread)
- Enhanced letter reveal (scale + rotation + blur)
- Extended timing: 400ms ‚Üí 1400ms

**Removed:**
- Light rays animation (too flashy, not classy per user feedback)

### Form Slogan Styling
**Problem:** "La mesa te espera" looked like a generic headline, not a memorable slogan.

**Initial approach:** Em-dashes + reduced opacity (too precious/whispered)

**User reminder:** Remember Dana White's UFC competitive edge ‚Äî not too classy!

**Final solution:**
- Bodoni Moda italic (elegant but confident)
- Full opacity (not whispered)
- Clean without em-dashes
- Balance of Cuban elegance and UFC confidence

### Key Takeaways
- 99% of users are on mobile ‚Äî prioritize iPhone experience
- Use CSS `max()` for guaranteed minimum padding
- Balance elegance with competitive spirit (Dana White's UFC + Cuban culture)
- Remove gimmicky effects in favor of confident simplicity

---

## Recent Session Notes (Jan 14, 2026) ‚Äî Hero Redesign + Ticker Safari Fix

### Hero Section Redesign (Tobias van Schneider critique)

**Problems identified:**
1. "Cuban Domino League presents" too quiet/invisible
2. "CDL 1" floating with no visual relationship to main title
3. Subtitle "THE FIRST CUBAN DOMINO LEAGUE CHAMPIONSHIP" felt redundant
4. Too many elements competing with "La Salida"

**Solution: UFC-style tournament badge**
- Removed "Cuban Domino League presents" entirely (redundant with CDL branding)
- Created brass gradient badge for "CDL I" (like UFC 1, UFC 2, etc.)
- Badge sits above "La Salida" as a tournament marker
- Championship tagline now has decorative brass lines framing it

**New hierarchy:**
1. **CDL I badge** ‚Äî Brass gradient, all caps, subtle shadow
2. **La Salida** ‚Äî Dominates, unchanged
3. **Championship stamp** ‚Äî Brass lines frame "THE FIRST CUBAN DOMINO LEAGUE CHAMPIONSHIP"
4. **Date/Venue** ‚Äî Unchanged

### Ticker Safari Dimming Bug

**Symptoms on iPhone Safari:**
1. Page loads ‚Üí ticker is dimmed (~50% opacity)
2. Scroll to panel 2 ‚Üí ticker suddenly undims
3. ~5 seconds later ‚Üí dims again and stays dimmed

**Root cause investigation:**
- CSS `:has(.chat-panel.is-open)` selectors were misbehaving in Safari
- Safari's `:has()` support is inconsistent and can trigger false positives

**Fixes applied:**
1. **Removed all `:has()` ticker rules** ‚Äî No more CSS reliance on `:has()` for ticker dimming
2. **Added explicit `:not(.ticker-dimmed)` rules** ‚Äî With `!important` to force full opacity
3. **JS-only class toggling** ‚Äî `openChat()` and `toggleChat()` now manage `ticker-dimmed` class
4. **Debug logging** ‚Äî MutationObserver tracks class changes for diagnosis

**CSS approach:**
```css
/* Force visibility unless explicitly dimmed */
.mesa-ticker:not(.ticker-dimmed) .mesa-ticker__track,
.mesa-ticker:not(.ticker-dimmed) .mesa-ticker__badge {
  opacity: 1 !important;
}
```

**Status:** Fix deployed, awaiting iPhone testing. Debug logs will reveal if class is being added unexpectedly.

---

## Recent Session Notes (Jan 14, 2026) ‚Äî Mobile Form Panel Redesign

### The Problem
Mobile users (90% of traffic) had to scroll twice on the form panel:
1. First snap: See form + button
2. Second scroll: Massive empty void before seeing footer

### Tobias van Schneider's Direction
> "Don't fight scroll-snap. Embrace it. One viewport, everything visible, nothing hidden."

### Solution: Single Viewport Experience
Everything fits on one screen on mobile:
- **Headline compact** ‚Äî "La mesa te espera" at clamp(1.6rem, 7vw, 2.2rem)
- **Top scarcity badge hidden** ‚Äî Moved below button
- **Button scarcity** ‚Äî Small "X seats remain" below Claim Your Seat
- **Footer always visible** ‚Äî Contact info + CDL branding on same screen
- **Notes field hidden** ‚Äî Saves vertical space on mobile

### Technical Changes
1. `scroll-padding-bottom: 46px` on `.story` for ticker clearance
2. `.form-header` shown on mobile (was hidden)
3. `.form-scarcity` hidden on mobile
4. New `.button-scarcity` element below submit button
5. Footer compact: inline layout, smaller text
6. Removed scroll-hint-divider (wasn't solving the problem)

### Iterations
1. **30vh margin** ‚Äî Too much empty void
2. **Scroll-hint divider** ‚Äî Decorative but didn't fix the UX
3. **15vh margin** ‚Äî Still awkward
4. **Single viewport** ‚Äî Final solution, everything visible

---

## Recent Session Notes (Jan 14, 2026) ‚Äî Loading Screen Refinement

### The Problem
Initial loading screen had a single circular radial gradient glow behind the CDL letters. Looked like a "brown cloud" or "flashlight" ‚Äî not atmospheric.

### Tobias van Schneider's Direction
> "Dark UI is about depth, not darkness. It's layers of smoke, not a black wall."

The key insight: **The letters ARE the light source.** Light should emanate FROM them, not exist behind them as a separate blob.

### Implementation (3 iterations)

**Attempt 1: Three fog layers**
- Deep (copper), mid (brass), near (amber) at different scales
- Different breathing animation speeds (8s/5s/3s)
- Still looked like a brown cloud

**Attempt 2: Letters as light source**
- 6-layer stacked text-shadow bloom on each letter
- Colors progress: bright amber ‚Üí brass ‚Üí copper
- Divider gets 3-layer box-shadow glow
- Single subtle ambient fog layer (support, not main event)

### Final CSS Approach
```css
.cdl-tile__letter {
  text-shadow:
    0 0 10px rgba(232, 190, 140, 1),
    0 0 20px rgba(232, 190, 140, 0.9),
    0 0 40px rgba(212, 165, 116, 0.8),
    0 0 80px rgba(212, 165, 116, 0.5),
    0 0 120px rgba(183, 106, 59, 0.4),
    0 0 200px rgba(183, 106, 59, 0.2);
}
```

### Immersive Enhancements Added
1. **Film grain** ‚Äî SVG noise texture via `::before` pseudo-element (4% opacity)
2. **Vignette** ‚Äî Radial gradient via `::after` pseudo-element (dark edges)
3. **Staggered letter reveal** ‚Äî C (0.2s) ‚Üí D (0.5s) ‚Üí L (0.8s) with blur-to-sharp
4. **Divider scaleX reveal** ‚Äî Horizontal line expands from center

### Key Learnings
- Text-shadow stacking creates more organic bloom than background gradients
- Brighter base color (#e8be8c vs #d4a574) makes letters feel like they emit light
- Ambient fog should support, not compete ‚Äî very low opacity (0.08)
- The Three.js approach was abandoned after multiple attempts ‚Äî CSS is simpler and more effective

---

## Recent Session Notes (Jan 14, 2026) ‚Äî Ticker Redesign Session

### Ticker Simplification (Tobias van Schneider principles)
Radically simplified the ticker following Tobias's "less is more" approach:

**What shows now:**
- **Live count**: "‚óè 0 at the table" (green pulsing dot)
- **Spots remaining**: "16 spots left" (white)
- **Tournament updates**: "Registration closes Friday" (copper)
- **Registrations**: "ALEX TORRES just joined" (brass with action text)

**What was removed:**
- Chat events (too noisy)
- Separators (used spacing instead)
- Complex event type system

### Infinite Scroll Fix
- Added `tickerInitialized` flag to prevent animation resets
- GPU optimization with `will-change: transform` and `backface-visibility: hidden`
- Content duplicated with spacers for seamless loop
- Scroll speed: 28s (comfortable reading pace)

### Registration Gate
La Mesa button now gates unregistered users:
- Click scrolls to registration form if not registered
- Chat only accessible after signup
- Encourages conversion

### CSS Scoping Fix
Discovered Astro CSS scoping issue - JS-generated elements don't get `data-astro-cid` attributes. Fixed by wrapping all ticker styles in `:global()`.

---

## Recent Session Notes (Jan 14, 2026) ‚Äî La Mesa Redesign + Logo Session

### La Mesa ESPN-Style Redesign
Implemented "ambient awareness" ticker inspired by ESPN sports broadcasts:
- Fixed "LIVE" badge with activity feed scrolling
- Shows registrations, joins, chat activity in real-time
- Touch-to-pause on mobile (1.5s resume delay)
- Focus hierarchy: ticker dims when chat is open

### Mobile Fixes (90% of users are mobile!)
- **Scroll lock bug:** Fixed send button disappearing and page zoom issue
- **Ticker visibility:** Now shows below chat input when chat is open
- **iOS Safari zoom:** Added `maximum-scale=1` to viewport, increased input font to 16px

### Logo Design Session (Herb Lubalin)
5 concept directions developed with full team input:
1. **The Ligature** ‚Äî C-D-L as one continuous flowing form
2. **The Tile** ‚Äî Letters arranged like pips within domino proportions
3. **The Monogram** ‚Äî Interlocked letters sharing strokes
4. **The Double** ‚Äî Ambigram/rotationally symmetrical design
5. **The Stamp** ‚Äî Bold badge with curved text

See: `TEAM/SESSIONS/2026-01-14-logo-design-session.md`

### Merch Brainstorm Session
21 products conceptualized with Nano Banana Pro prompts:
- Domino sets (3 tiers: Standard, Premium, Collector)
- Tables (Folding, Round, Bar Height)
- Apparel (Guayabera, Tee, Hoodie, Dad Hat, Chain)
- Lifestyle (Ashtray, Coasters, Cafecito Set, Playing Mat)

See: `TEAM/SESSIONS/2026-01-14-merch-brainstorm.md`

### Chat Simplified
Removed reaction system (+ button, emoji picker) ‚Äî too cluttered. Keeping chat focused on conversation.

---

## Recent Session Notes (Jan 13, 2026) ‚Äî Design Team Implementation

Following Tobias van Schneider's site audit and the full design team review session, implemented the team's consensus recommendations:

### Implemented Changes:

1. **Domino Button 50% Larger + Heartbeat Pulse** (George, Wifredo, Tobias)
   - Size increased from 56√ó90px to 84√ó135px
   - Added `boneHeartbeat` animation - subtle scale pulse every 3s
   - "Put the bone in their face." ‚Äî George Lois

2. **Single Pip for Free Agent** (All)
   - Replaced text badge "Free Agent" with single brass pip
   - "One pip is incomplete. A soul looking for its other half." ‚Äî Wifredo Lam
   - Tooltip on hover: "Looking for a partner"

3. **Warm Fog Gradient in Chat** (Tobias, Wes)
   - Added fog gradient: darker at top, lighter at bottom (where you type)
   - "Amber in the shadows." ‚Äî Wes Anderson
   - Sticky fog layer at top of messages area

4. **Send Button Slam Animation** (Tobias)
   - Scale down to 0.9 + shadow burst + ripple on send
   - "The slam is ritual. When you play a domino, you're declaring." ‚Äî Wifredo Lam

5. **Film Grain on All Backgrounds** (Wes)
   - 2-3% noise overlay on all panel backgrounds
   - "Like photos from 1978, lovingly preserved." ‚Äî Wes Anderson

6. **Center Registration Form** (Wes)
   - Added flexbox centering to form panel content
   - "The form should be centered. Center it." ‚Äî Wes Anderson

7. **Brass Underline on "LA MESA" Header** (Herb)
   - Added brass gradient underline beneath title
   - Decorative pip accent below subtitle
   - "Like a sign above a door. You have arrived." ‚Äî Herb Lubalin

### Team Documentation Created:
- `TEAM/chief-product-designer-tobias-van-schneider.md`
- `TEAM/SESSIONS/tobias-site-audit-jan13.md`
- `TEAM/SESSIONS/design-team-site-review-jan13.md`

---

## Recent Session Notes (Jan 13, 2026) ‚Äî Bone Language

### "The Bone Language" Design System

Created unified design system based on the domino tile shape. All UI components now share consistent visual language.

**Key Changes:**
- **La Mesa button**: Transformed from generic pill to vertical domino tile (56√ó90px) with 5-pip pattern
- **Border-radius unified**: All components now use `12px` (was mix of 0, 50px, 999px)
- **Animation timing**: Reduced stagger delays for snappier feel (480ms ‚Üí 260ms max)
- **Component updates**:
  - Registration form submit button
  - Success screen CTA
  - Tutorial panel CTA
  - Identity screen indicator
  - ENTER button

**Documentation:** See `DESIGN-SYSTEM.md` for full brand guidelines.

### La Mesa Post-Registration Flow

La Mesa chat is now a "reward" after registration:
1. Widget hidden by default for new visitors
2. Success overlay includes CTA: "Pull up a chair at La Mesa"
3. Tutorial panel appears for users who dismiss success
4. `localStorage.cdl_registered` tracks registration state
5. Previously registered users see La Mesa immediately

### Identity Screen UX Improvements

- Custom dropdown replaces native `<select>` for modern feel
- "X at the table" live indicator shows player count (FOMO)
- Flag selector with scroll hint
- Cuba and USA flags prioritized in order

---

## Recent Session Notes (Jan 12, 2026)

### Chat Features Added
New "La Mesa" chat features require Supabase schema update. Run in SQL Editor:
```sql
ALTER TABLE messages
ADD COLUMN IF NOT EXISTS avatar TEXT DEFAULT 'domino',
ADD COLUMN IF NOT EXISTS reactions JSONB DEFAULT '{}',
ADD COLUMN IF NOT EXISTS is_pinned BOOLEAN DEFAULT false;
```

Migration file: `supabase/migrations/20260112045342_add_chat_features.sql`

---

## Recent Session Notes (Jan 11, 2025)

### Registration System Bug Fix
**Problem:** Form submissions were failing with 500 errors when email delivery failed (bounced addresses, invalid emails, etc.)

**Root Cause:** The `doPost()` function in Apps Script treated email sending as blocking - if Resend returned an error, the entire registration would fail.

**Solution:** Wrapped all `sendEmail()` calls in try/catch blocks. Registration now succeeds even if email delivery fails. Errors are logged but don't crash the request.

**Documentation:** See `TROUBLESHOOTING.md` for full details and future debugging tips.

### Email Setup
| Purpose | Address | Forwards To |
|---------|---------|-------------|
| Transactional (sends from) | `no-reply@cubandominoleague.com` | N/A |
| Contact (questions) | `Erik@cubandominoleague.com` | efelipe1992@gmail.com |

**Note:** Erik needs to click the Cloudflare verification email to activate routing.

**Confirmation emails now say:** "Questions? Email us at Erik@cubandominoleague.com"

### Gmail Fallback Removal (Jan 11, 2025)
**Problem:** Gmail fallback in `Code.gs` would send from personal email if Resend wasn't configured.

**Solution:** Removed Gmail fallback entirely. If `RESEND_API_KEY` is not set, email fails (safely - registration still saves per previous fix).

**Files changed:**
- `apps-script/Code.gs` - Removed `GmailApp.sendEmail()` fallback, added `checkResendConfig()` helper
- `TROUBLESHOOTING.md` - Updated to reference new `DOCS/BUGS/` folder
- Created `DOCS/BUGS/` folder with structured bug documentation
